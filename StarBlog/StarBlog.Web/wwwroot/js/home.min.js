const HEIGHT=400;let homeApp=new Vue({el:"#vue-app",data:{poem:{},hitokoto:{},poemSimple:"",chartTypes:["bubble","bar"],currentChartTypeIndex:0,currentChart:null},computed:{chartElem(){return document.getElementById("myChart")}},created(){this.loadPoem(),this.loadHitokoto()},mounted(){!0===CHART_VISIBLE&&this.loadChart()},methods:{loadPoem(){fetch("/Api/DataAcq/Poem").then(t=>t.json()).then(t=>this.poemSimple=t.data)},loadHitokoto(){fetch("/Api/DataAcq/Hitokoto").then(t=>t.json()).then(t=>this.hitokoto=t.data)},randomRGB(){return"rgb("+this.randomColorArray().join(",")+")"},randomRGBA(t){return this.convertRGBA(this.randomColorArray(),t)},convertRGBA(t,r){t=Array.from(t);return t.push(r),"rgba("+t.join(",")+")"},randomColorArray(){return[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())]},switchChartType(){this.currentChartTypeIndex>=this.chartTypes.length-1?this.currentChartTypeIndex=0:this.currentChartTypeIndex++,this.currentChart&&this.currentChart.destroy(),this.chartElem.setAttribute("style",""),this.loadChart()},loadChart(){switch(this.chartTypes[this.currentChartTypeIndex]){case"bubble":this.loadBubbleChart();break;case"bar":this.loadBarChart()}},loadBubbleChart(){fetch("/Api/Category/WordCloud").then(t=>t.json()).then(t=>{let a=[];t.data.forEach(t=>{var r=this.randomColorArray();a.push({label:t.name,data:[{x:Math.round(50*Math.random()),y:Math.round(50*Math.random()),r:t.value}],backgroundColor:this.convertRGBA(r,.2),borderColor:this.convertRGBA(r,1),borderWidth:1})});t={datasets:a};this.currentChart=new Chart(this.chartElem,{type:"bubble",data:t,options:{maintainAspectRatio:!1}}),this.currentChart.resize(null,HEIGHT)})},loadBarChart(){fetch("/Api/Category/WordCloud").then(t=>t.json()).then(t=>{let r=[],a=[],o=[],e=[];t.data.forEach(t=>{r.push(t.name),a.push(t.value);t=this.randomColorArray();o.push(this.convertRGBA(t,.2)),e.push(this.convertRGBA(t,1))});t={labels:r,datasets:[{label:"# of Votes",data:a,backgroundColor:o,borderColor:e,borderWidth:1}]};this.currentChart=new Chart(this.chartElem,{type:"bar",data:t,options:{maintainAspectRatio:!1}}),this.currentChart.resize(null,HEIGHT)})}}});console.log("Enable tooltips");const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map(t=>new bootstrap.Tooltip(t));